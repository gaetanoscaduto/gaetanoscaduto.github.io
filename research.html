<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>About me – Gaetano Scaduto</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-ddd961a2510921635943dfbbd19534c4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Gaetano Scaduto</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./research.html" aria-current="page"> 
<span class="menu-text">About me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./cv.html"> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./publications.html"> 
<span class="menu-text">Things I wrote</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./teaching.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./In the media.html"> 
<span class="menu-text">In the media</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./contacts.html"> 
<span class="menu-text">Contacts</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools tools-wide">
    <a href="https://github.com/gaetanoscaduto" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <a href="https://www.linkedin.com/in/gaetano-scaduto-92b6981ba/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
    <a href="https://scholar.google.com/citations?user=CjeVWvQAAAAJ&amp;hl=it&amp;oi=ao" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-scholar"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#my-phd-research-me" id="toc-my-phd-research-me" class="nav-link active" data-scroll-target="#my-phd-research-me">My (PhD) Research &amp; Me</a>
  <ul class="collapse">
  <li><a href="#it-all-started-at-the-canteen" id="toc-it-all-started-at-the-canteen" class="nav-link" data-scroll-target="#it-all-started-at-the-canteen">It all started at the canteen…</a></li>
  <li><a href="#stereotypes-and-prejudice" id="toc-stereotypes-and-prejudice" class="nav-link" data-scroll-target="#stereotypes-and-prejudice">Stereotypes and Prejudice</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">About me</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<style>
  body {
  background-image: url("./backgrounds/background_ag1.jpeg");
  background-attachment: fixed;
  background-size: cover;
  background-repeat: no-repeat;
}
  
.text-background {
    background-color: rgba(256, 256, 256, 0.8); 
    color: black; /* White text for contrast */
    padding: 5px 10px; /* Padding around text */
    display: inline-block; /* Ensures the background only takes up necessary space */
}
</style>
<div class="text-background">
<p><strong>Last updated: January 2025</strong></p>
<section id="my-life-so-far" class="level1">
<h1>My life so far</h1>
<section id="sicily" class="level2">
<h2 class="anchored" data-anchor-id="sicily">Sicily</h2>
<p>I was born on February 25th, 1999, in Agrigento, a small city in Sicily. The very same night, <a href="https://www.youtube.com/watch?v=UZh8m3KygBY">Fabio Fazio interviewed Mikhail Gorbachev at the Festival di Sanremo</a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Tempio-della-Concordia-930x620.jpg" class="img-fluid figure-img" width="323"></p>
<figcaption>The Concordia Temple, the most famous landmark in my hometown (also a UNESCO World Heritage site)</figcaption>
</figure>
</div>
<p>When I was a little boy, I wanted to be a comedian. Since then, I have changed my mind hundreds of times about what I wanted to become as an adult.</p>
<p>I attended the “Empedocle” classical high school in Agrigento, wanting to be a writer or something like that. But I quickly got bored and decided to change my path.</p>
</section>
<section id="northern-italy" class="level2">
<h2 class="anchored" data-anchor-id="northern-italy">Northern Italy</h2>
<p>At the age of 18, I moved to Turin, where I earned a Bachelor’s degree in <strong>Mathematics for Engineering</strong> with final grade of 110/110 at the Polytechnic of Turin.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="e715e7dd9599f54e9c2780ac9a2cf439.jpg" class="img-fluid figure-img" width="323"></p>
<figcaption>The city of Turin, which adopted me during my university years</figcaption>
</figure>
</div>
<p>But then, I grew tired of doing maths for its own sake. I enrolled in a Master’s degree in <strong>Political and Public Communication</strong> at the University of Turin, from which I graduated with 110/110 cum laude in 2022.</p>
<p>During the summer of 2022, I worked for a political marketing firm, managing electoral campaigns as a deputy campaign coordinator and junior researcher during the 2022 Italian general elections.</p>
<p>I then enrolled in the PhD program of <strong>Analysis of Social and Economic Processes</strong> (ASEP) at the University of Milan-Bicocca. During my Ph.D.&nbsp;I have also served as a <strong>teaching assistant</strong> for Mathematics and Public Policies in the Bachelor’s program in Organization Sciences (UNIMIB).</p>
</section>
<section id="low-countries" class="level2">
<h2 class="anchored" data-anchor-id="low-countries">Low Countries</h2>
<p>Since February 2024, I have been living in Antwerp (Belgium), working with the “<a href="https://www.uantwerpen.be/en/research-groups/m2p/">Media, Movement, and Politics (M2P)</a>”. It started as a research stay, but it ended up becoming my life, and now I’m based in Antwerp until further notice.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-3574034271.png" class="img-fluid figure-img" width="323"></p>
<figcaption>The entrance to the Antwerp train station, one of its most famous landmarks</figcaption>
</figure>
</div>
<p>From I started a new adventure at the <a href="https://www.eur.nl/essb/informatie-voor/onderzoekers/erasmus-institute-culture-and-stratification">Erasmus Institute on Culture and Stratification</a> within Erasmus University Rotterdam (EUR). I work on a project named “Understanding the different meanings of climate change among the public”. The new challenges that I will face include using qualitative methods, exploring a new research field, and joining a new research community. I really look forward to it!</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/rotterdam.jpeg" class="img-fluid figure-img" width="323"></p>
<figcaption>The view of Rotterdam from EUR</figcaption>
</figure>
</div>
<p>In my free time, I still love <strong>writing</strong> and <strong>learning languages</strong>. I am currently learning <strong>Dutch</strong>, which helps me a lot given that I live in Flanders and work in the Netherlands.</p>
<p>I also love <strong>biking</strong> and listening to music of every genre. My all-time favorites? The Cure, Fabrizio De André, and Elio e le Storie Tese. My favorite directors are Paolo Sorrentino and Wes Anderson (but I swear I’m not <em>that</em> kind of hipster). My favorite TV show is probably <em>Scrubs</em> because it remains the only comedy series I still find amusing more than 20 years after its release. I am a huge fan of stand-up comedy.</p>
</section>
</section>
</div>
<section id="my-phd-research-me" class="level1 text-background">
<h1>My (PhD) Research &amp; Me</h1>
<section id="it-all-started-at-the-canteen" class="level2">
<h2 class="anchored" data-anchor-id="it-all-started-at-the-canteen">It all started at the canteen…</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/250454928_1277070772812659_5201918329899356277_n-01.jpg" class="img-fluid figure-img" width="315"></p>
<figcaption>I still ask myself if this picture really makes sense</figcaption>
</figure>
</div>
<p>During my university years, I often used to go to the university canteen to eat, being both poor and too lazy to cook.</p>
<p>I used to live in Turin (the most beautiful city in the world, in case you didn’t know it). First I studied at the Polytechnic University of Turin (PoliTo), and then at the University of Turin (UniTo).</p>
<p>The two universities are pretty far from each other and have different canteens. Yet, both canteens were handled by the same distributor, so the food provided to one was the same provided to the other. At the same time, every canteen seemed to have a lot of freedom in choosing what they could serve to the students.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/kdntye08ifo71.png" class="img-fluid figure-img" width="318"></p>
<figcaption>Unrelated image</figcaption>
</figure>
</div>
<p>I am an omnivore, yet I always kind of suffered from the short list of vegetarian options (and the complete lack of vegan options) that I found at the canteen near the PoliTo. When I started going to UniTo, I noticed that the canteen there ALWAYS had at least one VEGAN option. From Monday to Saturday (it was closed on Sunday) there was always something different, either lentils burgers, tofu, seitan, or something else that was prepared with a certain amount of care.</p>
<p>I started asking myself <em>why</em>.</p>
</section>
<section id="stereotypes-and-prejudice" class="level2">
<h2 class="anchored" data-anchor-id="stereotypes-and-prejudice">Stereotypes and Prejudice</h2>
<p>I had always perceived the PoliTo as a kind-of-right-wing university. STEM culture in Italy is usually linked to the center and center-right. The reasons can be many, but they may reside in the fact that people who tend to choose these faculties may value as more important the amount of money they will make from their future jobs. We could discuss these reasons another time.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/263550586_4226967020740801_1825853446643812209_n-01.jpg" class="img-fluid figure-img" width="276"></p>
<figcaption>On the left: classic UniTo haircuts; On the right: classic PoliTo haircuts</figcaption>
</figure>
</div>
<p>I did not have at the time, and still don’t, any data to prove that PoliTo students are more right-wing than UniTo students. Yet, my <strong>perception</strong> of them being more right was consistent with the lack of attention that, in the canteen near the PoliTo, was reserved for vegans and vegetarians; a population that, you can believe me on my word, is likely to be considered as more left-wing than most.</p>
<ul>
<li>If you don’t believe me, read my paper titled “<a href="https://www.tandfonline.com/doi/full/10.1080/13608746.2024.2411539">Food for (Political) Thought</a>”.</li>
</ul>
<p>At the same time, UniTo was, in my mind, a left-wing stronghold. Especially in the social-science-dominated Campus Einaudi (the most beautiful university campus in the world, in case you didn’t know it), being a leftie was the assumed condition for everyone, and people who were not lefties were spotted and glanced with adversarial intent by most of their colleagues. Again, I do not have any data to confirm that (although one could look at the University elections and see that, while in PoliTO there were no successful extreme-left university parties, in UniTo there were at least - like - three. When I asked myself why the canteens were so different in terms of their menu, I gave myself the following response: “Probably the lefties in UniTo elected a student representative that wanted to push the availability of vegan options in the canteen, to promote environmentally friendly agenda that winked at their left-wing constituency”.</p>
<p>At that time, I was preparing my PhD proposal. One day, I went to my mentor and told him something like:</p>
<p><strong>G:</strong> “Ehy! I have an idea about my PhD proposal”</p>
<p><strong>M:</strong> “Shoot”</p>
<p><strong>G:</strong> “I want to explain why in UniTo everyone is a leftie and in PoliTo everyone is a righty”</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/photo1665245031 (2)-01.jpeg" class="img-fluid figure-img" width="494"></p>
<figcaption>Only for (left-wing) Italians</figcaption>
</figure>
</div>
<p>##Genesis of a PhD Project</p>
<p>M readily understood that I was going toward a gigantic stream of literature, that would have consumed my life from then on. But I always loved this stuff, and I was ready to go down the rabbit hole. For a year or so, I read papers on the alignment regarding lifestyle and political preferences. Why do lefties prefer hip-hop, modern art, vegan food, and Birkenstocks, and why do righties prefer classical music, old and sacred art, meat, and white shirts?</p>
<p>After a year or so, I was talking with a PhD colleague of mine, who, incidentally, used to be a student representative - responsible for the canteen - at UniTo, and I told her my story about the canteen. And here, she freaking changed my world. She told me that <strong>no one among the student representatives ever pushed for the canteen menu to be more vegan</strong>.</p>
<p>Now, I do not know if she was fully aware or if she was just assuming, but that completely changed my perspective.</p>
<p>If no student ever pushed for having a more vegan menu at UniTo’s canteen, it meant that it was something that came from inside the canteen itself. Maybe some very vegan person worked there completely by chance and pushed for a more vegan-friendly menu. Or maybe, just maybe, <strong>they expected, by virtue of their own stereotypes, that UniTo students would indeed appreciate the Vegan menu more than PoliTo students</strong>, and therefore act accordingly.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/photo1686763796-04.jpeg" class="img-fluid figure-img" width="330"></p>
<figcaption>A scene from an old Italian movie. The caption says: “Mortadella is communist, salami is socialist, prosciutto is a Christian democrat, […] and ham is a fascist.</figcaption>
</figure>
</div>
<p>What a freaking game changer: the knowledge (or even the presumed knowledge) of the political preferences of the student body were translated into assumed lifestyle preferences, and our reality (more precisely, my lunch) was bent according to this perception.</p>
<p>I thought this was enough to choose to dedicate my entire career to this: shedding light of the political inferences from apolitical cues, the apolitical inferences from political cues, and political stereotypes, and political compasses, and political caricatures, their consequences, causes, related aspects, so on and so forth.</p>
</section>
</section>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>